{% load static %}
{% load custom_filters %}

<!doctype html>
<html lang=de>

{% include 'head.html' %}

<style>
    .read-more {
        cursor: pointer;
    }
</style>

<body>

    {% include 'header.html' %}

    <main class="main">
        <div style="height: 92px;"></div>
        <article class="kommune__wrapper">
            <h2>Klimavorhabentracker f√ºr {{ kommune.name }} - Feld {{ field.name }}</h2>

            <div class="expandable-text">
                <span class="short-text">{{kommuneActionField.description|truncatechars:400}} </span>
                <span class="long-text" style="display: none;">{{kommuneActionField.description|linebreaks}}</span>
                <a class="read-more">Mehr lesen</a>
            </div>

            <div class="fields">
                {% for action in actions %}
                <a class="text-decoration-none"
                    href="{% url 'action_detail' municipality_slug=kommune.slug action_id=action.id %}">
                    <div class="field">
                        <div class="field-top">
                            <h4>{{action.short_title}}</h4>
                        </div>
                        <div class="field-actions">
                            <p>{{ action.title }}</p>
                        </div>
                        <div class="field-bottom">
                            <span>-> mehr lesen</span>
                            <span class="action-status action-status--unknown">Status unbekannt</span>
                        </div>
                    </div>
                </a>
                {% endfor %}
            </div>


        </article>
    </main>

    {% include 'footer.html' %}
</body>

<script>
    document.querySelector(".read-more").addEventListener("click", function () {
        var longText = document.querySelector(".long-text");
        var shortText = document.querySelector(".short-text");
        var btnText = document.querySelector(".read-more");

        if (longText.style.display == "none") {
            longText.style.display = "inline";
            btnText.innerHTML = "Weniger lesen";
            shortText.style.display = "none";
        } else {
            longText.style.display = "none";
            btnText.innerHTML = "Mehr lesen";
            shortText.style.display = "inline";
        }
    });
</script>

</html>